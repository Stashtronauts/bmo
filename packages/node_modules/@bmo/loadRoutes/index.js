import { merge, set, get } from 'lodash'
export default (routes, router) => {
	routes.forEach(route => {
		router.use(route.routes())
		const { prefix } = route.opts
		if (prefix) {
			set(router, `paths.${prefix}`, merge({},
				get(router, `paths.${prefix}`, {}),
				route.paths))
		} else {
			router.paths = merge(router.paths, route.paths)
		}
	})
	return router
}
